# AEC RAG System - Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=aec-rag-system
APP_ENV=development  # development, staging, production
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
DEBUG=true

# =============================================================================
# Ollama Settings (Local LLM & Embeddings)
# =============================================================================
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
OLLAMA_LLM_MODEL=llama3.1:8b
OLLAMA_TIMEOUT=120  # seconds

# =============================================================================
# Vector Database Configuration
# =============================================================================
# Choose: chromadb, milvus, qdrant
VECTOR_DB_TYPE=chromadb

# ChromaDB (embedded, no external service needed)
CHROMA_PERSIST_DIR=./data/chroma_db

# Milvus (production-ready, requires Docker)
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_USER=
MILVUS_PASSWORD=
MILVUS_COLLECTION_NAME=aec_documents

# Qdrant (alternative production option)
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION_NAME=aec_documents
QDRANT_API_KEY=

# =============================================================================
# GraphRAG Configuration
# =============================================================================
# Choose: linearrag, nano-graphrag
GRAPHRAG_TYPE=nano-graphrag
GRAPHRAG_WORKING_DIR=./data/graphrag
GRAPH_STORAGE=networkx  # networkx (file-based) or neo4j (database)

# Neo4j (optional, for production scale)
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# =============================================================================
# Document Processing
# =============================================================================
# CAD Processing
CAD_SUPPORTED_FORMATS=dwg,dxf,rvt
CAD_EXTRACT_LAYERS=true
CAD_EXTRACT_METADATA=true

# PDF Processing
PDF_EXTRACT_IMAGES=false
PDF_OCR_ENABLED=true
PDF_OCR_LANGUAGE=eng

# Text Chunking
CHUNK_SIZE=1024
CHUNK_OVERLAP=200
CHUNKING_STRATEGY=semantic  # fixed, semantic, hierarchical

# =============================================================================
# RAG Pipeline Settings
# =============================================================================
# Retrieval
RETRIEVAL_TOP_K=5
RETRIEVAL_MIN_SCORE=0.7
RETRIEVAL_RERANK=false

# Generation
GENERATION_MAX_TOKENS=1024
GENERATION_TEMPERATURE=0.1
GENERATION_TOP_P=0.9

# =============================================================================
# API Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true  # Development only
API_CORS_ORIGINS=["http://localhost:3000"]

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60  # seconds

# =============================================================================
# Storage Paths
# =============================================================================
DATA_DIR=./data
UPLOAD_DIR=./data/uploads
PROCESSED_DIR=./data/processed
CACHE_DIR=./data/cache
LOG_DIR=./logs

# =============================================================================
# Performance Tuning
# =============================================================================
# VRAM Management (bytes)
MAX_VRAM_USAGE=14000000000  # 14GB (leave 2GB buffer for 16GB GPU)
BATCH_SIZE=32
NUM_WORKERS=4
ENABLE_CACHING=true
CACHE_TTL=3600  # seconds

# =============================================================================
# Monitoring & Observability
# =============================================================================
METRICS_ENABLED=true
METRICS_PORT=9090
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =============================================================================
# Security
# =============================================================================
# API Authentication (JWT)
SECRET_KEY=your-secret-key-change-in-production-min-32-chars
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Admin Credentials
ADMIN_USERNAME=admin
ADMIN_PASSWORD=change-me-in-production
